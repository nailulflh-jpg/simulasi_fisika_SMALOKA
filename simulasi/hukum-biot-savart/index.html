<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animasi Induksi Magnet pada Kawat Berarus</title>
     <a href="../../index.html" class="back-link">&larr; Kembali ke Dashboard</a>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 25px;
            max-width: 800px;
            width: 100%;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        
        .animation-container {
            position: relative;
            width: 100%;
            height: 500px;
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #e9ecef;
            perspective: 1000px;
        }
        
        .wire {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 10px;
            background: #34495e;
            transform: translateX(-50%);
            z-index: 10;
            box-shadow: 0 0 5px rgba(0,0,0,0.3);
        }
        
        .current-particle {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #f1c40f, #f39c12);
            border-radius: 50%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 25;
            box-shadow: 0 0 8px rgba(241, 196, 15, 0.8);
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            from { box-shadow: 0 0 8px rgba(241, 196, 15, 0.6); }
            to { box-shadow: 0 0 12px rgba(241, 196, 15, 1); }
        }
        
        .magnetic-particle {
            position: absolute;
            width: 16px;
            height: 16px;
            background: radial-gradient(circle, #2ecc71, #27ae60);
            clip-path: polygon(0% 0%, 100% 50%, 0% 100%, 30% 50%);
            z-index: 20;
            box-shadow: 0 0 8px rgba(46, 204, 113, 0.8);
        }
        
        .field-oval {
            position: absolute;
            border: 2px dashed #2ecc71;
            border-radius: 50%;
            opacity: 0.4;
            z-index: 5;
            pointer-events: none;
        }
        
        .field-direction-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            color: #e74c3c;
            z-index: 15;
        }
        
        .field-direction-indicator.left {
            left: 15%;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 2px solid #e74c3c;
        }
        
        .field-direction-indicator.right {
            right: 15%;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 2px solid #e74c3c;
        }
        
        .field-direction-label {
            position: absolute;
            font-size: 12px;
            color: #e74c3c;
            background: rgba(255, 255, 255, 0.9);
            padding: 5px 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 16;
            font-weight: bold;
        }
        
        .field-direction-label.left {
            left: 12%;
            top: 40%;
        }
        
        .field-direction-label.right {
            right: 12%;
            top: 40%;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 24px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }
        
        .hand-rule-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            color: #2c3e50;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 30;
        }
        
        .symbol-explanation {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            padding: 10px;
            background: rgba(241, 248, 255, 0.7);
            border-radius: 8px;
        }
        
        .symbol-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .symbol {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: #e74c3c;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border: 1px solid #e74c3c;
        }
        
        .arrow-icon {
            width: 16px;
            height: 16px;
            background: radial-gradient(circle, #2ecc71, #27ae60);
            clip-path: polygon(0% 0%, 100% 50%, 0% 100%, 30% 50%);
            display: inline-block;
            margin-right: 5px;
        }
        
        .direction-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(241, 248, 255, 0.7);
            border-radius: 10px;
        }
        
        .direction-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: white;
            border: 2px solid #3498db;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .direction-option:hover {
            background: #3498db;
            color: white;
        }
        
        .direction-option.active {
            background: #2ecc71;
            color: white;
            border-color: #2ecc71;
        }
        
        .direction-option input[type="radio"] {
            display: none;
        }
        
        .current-direction-label {
            font-size: 14px;
            font-weight: bold;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Animasi Induksi Magnet pada Kawat Berarus</h1>
        <p class="subtitle">Visualisasi tiga medan magnet oval pipih mengelilingi kawat lurus berarus listrik</p>
        
        <div class="direction-selector">
            <div class="direction-option" id="bottomToTop">
                <input type="radio" name="direction" value="bottomToTop" checked>
                <span>Arus dari Bawah ke Atas</span>
            </div>
            <div class="direction-option" id="topToBottom">
                <input type="radio" name="direction" value="topToBottom">
                <span>Arus dari Atas ke Bawah</span>
            </div>
        </div>
        
        <div class="animation-container" id="animationContainer">
            <div class="wire"></div>
            
            <!-- Simbol arah medan magnet -->
            <div class="field-direction-indicator left" id="leftSymbol">⊙</div>
            <div class="field-direction-label left" id="leftLabel">Keluar Bidang</div>
            
            <div class="field-direction-indicator right" id="rightSymbol">⊗</div>
            <div class="field-direction-label right" id="rightLabel">Masuk Bidang</div>
            
            <div class="hand-rule-indicator">
                <strong>Aturan Tangan Kanan:</strong><br>
                Ibu jari ↑ = Arah Arus<br>
                Jari = Arah Medan Magnet
            </div>
            <!-- Field ovals will be added by JavaScript -->
            <!-- Current particles will be added by JavaScript -->
            <!-- Magnetic particles will be added by JavaScript -->
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #f1c40f;"></div>
                <span>Arus Listrik (I)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #2ecc71;"></div>
                <span>Partikel Medan Magnet</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: transparent; border: 1px dashed #2ecc71;"></div>
                <span>Garis Lintasan Oval Pipih</span>
            </div>
        </div>
        
        <div class="symbol-explanation">
            <div class="symbol-item">
                <div class="symbol">⊙</div>
                <span>Medan magnet keluar dari bidang gambar (menuju pembaca)</span>
            </div>
            <div class="symbol-item">
                <div class="symbol">⊗</div>
                <span>Medan magnet masuk ke dalam bidang gambar (menjauhi pembaca)</span>
            </div>
        </div>
        
        <div class="controls">
            <button id="playBtn">Putar Animasi</button>
            <button id="pauseBtn">Jeda</button>
            <button id="resetBtn">Reset</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('animationContainer');
            const playBtn = document.getElementById('playBtn');
            const pauseBtn = document.getElementById('pauseBtn');
            const resetBtn = document.getElementById('resetBtn');
            const bottomToTopOption = document.getElementById('bottomToTop');
            const topToBottomOption = document.getElementById('topToBottom');
            const leftSymbol = document.getElementById('leftSymbol');
            const rightSymbol = document.getElementById('rightSymbol');
            const leftLabel = document.getElementById('leftLabel');
            const rightLabel = document.getElementById('rightLabel');
            
            let animationId;
            let currentParticles = [];
            let magneticParticles = [];
            let fieldOvals = [];
            let currentAngle = 0;
            let isPlaying = false;
            let currentDirection = 'bottomToTop'; // Default direction
            
            // Event listeners for direction selection
            bottomToTopOption.addEventListener('click', function() {
                currentDirection = 'bottomToTop';
                updateDirectionSelection();
                resetAnimation();
            });
            
            topToBottomOption.addEventListener('click', function() {
                currentDirection = 'topToBottom';
                updateDirectionSelection();
                resetAnimation();
            });
            
            function updateDirectionSelection() {
                // Remove active class from all options
                document.querySelectorAll('.direction-option').forEach(option => {
                    option.classList.remove('active');
                });
                
                // Add active class to selected option
                if (currentDirection === 'bottomToTop') {
                    bottomToTopOption.classList.add('active');
                } else {
                    topToBottomOption.classList.add('active');
                }
                
                // Update symbols and labels based on direction
                updateFieldSymbols();
            }
            
            function updateFieldSymbols() {
                if (currentDirection === 'bottomToTop') {
                    // Default: ⊙ di kiri (keluar bidang), ⊗ di kanan (masuk bidang)
                    leftSymbol.textContent = '⊙';
                    rightSymbol.textContent = '⊗';
                    leftLabel.textContent = 'Keluar Bidang';
                    rightLabel.textContent = 'Masuk Bidang';
                } else {
                    // Reversed: ⊗ di kiri (masuk bidang), ⊙ di kanan (keluar bidang)
                    leftSymbol.textContent = '⊗';
                    rightSymbol.textContent = '⊙';
                    leftLabel.textContent = 'Masuk Bidang';
                    rightLabel.textContent = 'Keluar Bidang';
                }
            }
            
            // Inisialisasi animasi
            function initAnimation() {
                // Hapus elemen sebelumnya
                document.querySelectorAll('.current-particle, .magnetic-particle, .field-oval').forEach(el => el.remove());
                currentParticles = [];
                magneticParticles = [];
                fieldOvals = [];
                currentAngle = 0;
                
                // Buat oval medan magnet
                createFieldOvals();
                
                // Buat partikel arus (11 partikel dengan jarak renggang)
                for (let i = 0; i < 11; i++) {
                    let startPos;
                    if (currentDirection === 'bottomToTop') {
                        // Mulai dari posisi bawah
                        startPos = container.offsetHeight + 30 + (i * 45);
                    } else {
                        // Mulai dari posisi atas
                        startPos = -30 - (i * 45);
                    }
                    
                    // Buat partikel arus
                    const particle = document.createElement('div');
                    particle.className = 'current-particle';
                    particle.style.top = `${startPos}px`;
                    container.appendChild(particle);
                    currentParticles.push(particle);
                }
                
                // Buat partikel medan magnet
                createMagneticParticles();
            }
            
            // Buat tiga oval medan magnet yang sangat pipih
            function createFieldOvals() {
                const fields = [
                    { name: 'top', position: 20 },    // Medan di atas
                    { name: 'middle', position: 50 }, // Medan di tengah
                    { name: 'bottom', position: 80 }  // Medan di bawah
                ];
                
                fields.forEach((field, fieldIndex) => {
                    // Buat beberapa oval untuk setiap medan
                    for (let ring = 0; ring < 2; ring++) {
                        const oval = document.createElement('div');
                        oval.className = 'field-oval';
                        
                        // Dimensi oval - membuatnya sangat pipih (lebar jauh lebih besar dari tinggi)
                        const width = 240 + ring * 60; // Lebar yang sangat besar
                        const height = 50 + ring * 15; // Tinggi yang sangat kecil
                        
                        oval.style.width = `${width}px`;
                        oval.style.height = `${height}px`;
                        oval.style.left = `calc(50% - ${width/2}px)`;
                        oval.style.top = `calc(${field.position}% - ${height/2}px)`;
                        
                        // Opacity berbeda untuk setiap oval
                        const opacity = 0.5 - ring * 0.1;
                        oval.style.opacity = opacity;
                        
                        container.appendChild(oval);
                        fieldOvals.push(oval);
                    }
                });
            }
            
            // Buat partikel medan magnet
            function createMagneticParticles() {
                const fields = [
                    { name: 'top', position: 20, radiusX: 120, radiusY: 25 },    // Medan di atas
                    { name: 'middle', position: 50, radiusX: 140, radiusY: 30 }, // Medan di tengah
                    { name: 'bottom', position: 80, radiusX: 120, radiusY: 25 }  // Medan di bawah
                ];
                
                fields.forEach((field, fieldIndex) => {
                    const particleCount = 16; // Jumlah partikel per medan
                    
                    // Buat beberapa ring untuk setiap medan
                    for (let ring = 0; ring < 2; ring++) {
                        const particlesPerRing = particleCount / 2;
                        
                        for (let i = 0; i < particlesPerRing; i++) {
                            const particle = document.createElement('div');
                            particle.className = 'magnetic-particle';
                            
                            // Hitung posisi awal - dimulai dari posisi yang benar
                            const angle = (i / particlesPerRing) * Math.PI * 2;
                            
                            // Gunakan persamaan elips untuk posisi
                            const x = Math.cos(angle) * (field.radiusX + ring * 20);
                            const y = Math.sin(angle) * (field.radiusY + ring * 5);
                            
                            // Posisikan partikel
                            particle.style.left = `calc(50% + ${x}px - 8px)`;
                            particle.style.top = `calc(${field.position}% + ${y}px - 8px)`;
                            
                            // Efek opacity berdasarkan kedalaman (z-index simulasi)
                            const depth = Math.sin(angle);
                            const opacity = 0.4 + depth * 0.3;
                            particle.style.opacity = opacity;
                            
                            // Ukuran partikel berdasarkan kedalaman
                            const size = 16 + depth * 4;
                            particle.style.width = `${size}px`;
                            particle.style.height = `${size}px`;
                            
                            container.appendChild(particle);
                            
                            magneticParticles.push({
                                element: particle,
                                baseAngle: angle,
                                radiusX: field.radiusX + ring * 20,
                                radiusY: field.radiusY + ring * 5,
                                fieldPosition: field.position,
                                ring: ring,
                                speed: 0.01 + ring * 0.005 + fieldIndex * 0.002 // Kecepatan berbeda
                            });
                        }
                    }
                });
            }
            
            // Animasi arus listrik
            function animateCurrent() {
                currentParticles.forEach((particle) => {
                    let top = parseFloat(particle.style.top);
                    
                    if (currentDirection === 'bottomToTop') {
                        // BERGERAK KE ATAS (kurangi nilai top)
                        top -= 2.5;
                        // Jika mencapai atas, kembali ke bawah
                        if (top < -30) {
                            top = container.offsetHeight + 30;
                        }
                    } else {
                        // BERGERAK KE BAWAH (tambah nilai top)
                        top += 2.5;
                        // Jika mencapai bawah, kembali ke atas
                        if (top > container.offsetHeight + 30) {
                            top = -30;
                        }
                    }
                    
                    particle.style.top = `${top}px`;
                });
            }
            
            // Animasi partikel medan magnet
            function animateMagneticField() {
                // Arah animasi medan magnet tergantung arah arus
                const directionMultiplier = currentDirection === 'bottomToTop' ? -1 : 1;
                
                magneticParticles.forEach((particle) => {
                    // Arah putaran medan magnet tergantung arah arus
                    const newAngle = particle.baseAngle + (currentAngle * (1 + particle.speed * 10) * directionMultiplier);
                    
                    // Hitung posisi baru menggunakan persamaan elips
                    const x = Math.cos(newAngle) * particle.radiusX;
                    const y = Math.sin(newAngle) * particle.radiusY;
                    
                    // Update posisi partikel
                    particle.element.style.left = `calc(50% + ${x}px - 8px)`;
                    particle.element.style.top = `calc(${particle.fieldPosition}% + ${y}px - 8px)`;
                    
                    // Hitung rotasi panah - PERBAIKAN: arah panah menunjuk arah medan magnet
                    // Untuk arus dari bawah ke atas: panah menunjuk searah jarum jam
                    // Untuk arus dari atas ke bawah: panah menunjuk berlawanan jarum jam
                    const rotation = (newAngle * 180 / Math.PI) + (90 * directionMultiplier);
                    
                    // Efek opacity berdasarkan kedalaman (simulasi 3D)
                    const depth = Math.sin(newAngle);
                    const opacity = 0.4 + depth * 0.3;
                    particle.element.style.opacity = opacity;
                    
                    // Ukuran partikel berdasarkan kedalaman
                    const size = 16 + depth * 4;
                    particle.element.style.width = `${size}px`;
                    particle.element.style.height = `${size}px`;
                    
                    // Terapkan rotasi pada panah
                    particle.element.style.transform = `rotate(${rotation}deg)`;
                });
                
                // Update sudut untuk animasi berikutnya
                currentAngle += 0.01;
            }
            
            // Fungsi animasi utama
            function animate() {
                if (!isPlaying) return;
                
                animateCurrent();
                animateMagneticField();
                
                animationId = requestAnimationFrame(animate);
            }
            
            // Kontrol animasi
            playBtn.addEventListener('click', function() {
                if (!isPlaying) {
                    isPlaying = true;
                    animate();
                }
            });
            
            pauseBtn.addEventListener('click', function() {
                isPlaying = false;
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
            });
            
            resetBtn.addEventListener('click', resetAnimation);
            
            function resetAnimation() {
                isPlaying = false;
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
                initAnimation();
            }
            
            // Inisialisasi
            updateDirectionSelection();
            initAnimation();
        });
    </script>
</body>
</html>